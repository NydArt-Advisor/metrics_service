# Metrics Service Environment Variables
# Copy this file to .env and fill in your actual values

# ===== SERVER CONFIGURATION =====
PORT=5005
NODE_ENV=development

# ===== DATABASE CONFIGURATION =====

# MongoDB Configuration
MONGODB_URI=mongodb://localhost:27017/metrics_service
# For MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/metrics_service

# Redis Configuration
REDIS_URL=redis://localhost:6379
# For Redis Cloud: redis://username:password@host:port

# ===== SECURITY CONFIGURATION =====

# JWT Configuration
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES_IN=24h

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===== SERVICE URLs =====
FRONTEND_URL=http://localhost:3000
CLIENT_URL=http://localhost:3000

# ===== MONITORING CONFIGURATION =====

# Prometheus Configuration
ENABLE_METRICS=true
METRICS_PORT=9090

# Logging Configuration
LOG_LEVEL=info
LOG_FILE=logs/metrics-service.log

# ===== PERFORMANCE CONFIGURATION =====
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT_MS=30000
DATABASE_TIMEOUT_MS=10000
CACHE_TTL_SECONDS=3600

# ===== ANALYTICS CONFIGURATION =====
ANALYTICS_ENABLED=true
DATA_RETENTION_DAYS=90
BATCH_SIZE=1000
AGGREGATION_INTERVAL_MINUTES=15

# ===== AI TRACKING CONFIGURATION =====
AI_TRACKING_ENABLED=true
AI_REQUEST_TIMEOUT_MS=30000
AI_MODEL_TRACKING=true
AI_COST_TRACKING=true

# ===== USER ENGAGEMENT CONFIGURATION =====
USER_TRACKING_ENABLED=true
SESSION_TIMEOUT_MINUTES=30
ACTIVITY_TRACKING=true
PAGE_VIEW_TRACKING=true

# ===== SALES ANALYTICS CONFIGURATION =====
SALES_TRACKING_ENABLED=true
REVENUE_TRACKING=true
SUBSCRIPTION_TRACKING=true
PAYMENT_TRACKING=true

# ===== PERFORMANCE MONITORING =====
PERFORMANCE_TRACKING_ENABLED=true
RESPONSE_TIME_TRACKING=true
ERROR_TRACKING=true
RESOURCE_USAGE_TRACKING=true

# ===== CORS CONFIGURATION =====
CORS_ORIGINS=http://localhost:3000,https://your-frontend-domain.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS

# ===== ERROR HANDLING =====
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_MS=1000
ERROR_REPORTING_ENABLED=true

# ===== DEVELOPMENT OVERRIDES =====
# Uncomment for development/testing
# MOCK_DATABASE=true
# MOCK_REDIS=true
# DEBUG_MODE=true

# ===== PRODUCTION OVERRIDES =====
# Uncomment and set for production
# NODE_ENV=production
# ENABLE_HTTPS=true
# SSL_CERT_PATH=/path/to/cert.pem
# SSL_KEY_PATH=/path/to/key.pem

# ===== TESTING OVERRIDES =====
# Uncomment for testing environment
# NODE_ENV=test
# MONGODB_URI=mongodb://localhost:27017/metrics_service_test
# REDIS_URL=redis://localhost:6379/1

# ===== DATA VALIDATION =====
VALIDATION_ENABLED=true
MAX_REQUEST_SIZE_MB=10
ALLOWED_FILE_TYPES=json,csv
MAX_ARRAY_SIZE=1000

# ===== CACHING CONFIGURATION =====
CACHE_ENABLED=true
CACHE_MAX_SIZE=1000
CACHE_CLEANUP_INTERVAL_MS=3600000
CACHE_PERSISTENCE=true

# ===== ALERTING CONFIGURATION =====
ALERTING_ENABLED=true
ALERT_WEBHOOK_URL=https://your-webhook-endpoint.com
ALERT_EMAIL=alerts@yourdomain.com
ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/your/webhook

# ===== METRICS AGGREGATION =====
AGGREGATION_ENABLED=true
REAL_TIME_AGGREGATION=true
HISTORICAL_AGGREGATION=true
CUSTOM_METRICS_ENABLED=true

# ===== DATA EXPORT =====
EXPORT_ENABLED=true
EXPORT_FORMATS=json,csv,xlsx
EXPORT_MAX_RECORDS=10000
EXPORT_RETENTION_DAYS=30

# ===== API RATE LIMITING =====
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX_REQUESTS=1000
API_RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# ===== DATABASE OPTIMIZATION =====
DATABASE_INDEXING_ENABLED=true
DATABASE_CONNECTION_POOL_SIZE=10
DATABASE_CONNECTION_TIMEOUT_MS=30000
DATABASE_QUERY_TIMEOUT_MS=30000

# ===== REDIS OPTIMIZATION =====
REDIS_CONNECTION_POOL_SIZE=10
REDIS_CONNECTION_TIMEOUT_MS=5000
REDIS_RETRY_ATTEMPTS=3
REDIS_RETRY_DELAY_MS=1000

# ===== SECURITY HEADERS =====
HELMET_ENABLED=true
CONTENT_SECURITY_POLICY=true
X_FRAME_OPTIONS=SAMEORIGIN
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block

# ===== COMPLIANCE =====
GDPR_COMPLIANT=true
DATA_ANONYMIZATION_ENABLED=true
DATA_RETENTION_POLICY_ENABLED=true
AUDIT_LOGGING_ENABLED=true

# ===== INTEGRATION =====
# External service URLs
AI_SERVICE_URL=http://localhost:3004
AUTH_SERVICE_URL=http://localhost:5002
PAYMENT_SERVICE_URL=http://localhost:4004
NOTIFICATION_SERVICE_URL=http://localhost:4003
DB_SERVICE_URL=http://localhost:5001

# ===== DEBUGGING =====
DEBUG_METRICS_COLLECTION=false
DEBUG_DATABASE_QUERIES=false
DEBUG_REDIS_OPERATIONS=false
DEBUG_API_REQUESTS=false

# ===== CUSTOMIZATION =====
# Custom metric names
CUSTOM_METRIC_PREFIX=nydart
CUSTOM_METRIC_SEPARATOR=_
CUSTOM_METRIC_TIMESTAMP_FORMAT=ISO

# Custom aggregation periods
CUSTOM_AGGREGATION_PERIODS=5m,15m,1h,6h,1d,1w,1M

# Custom alert thresholds
CUSTOM_ALERT_THRESHOLDS=error_rate:0.05,response_time:2000,memory_usage:0.8 